<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Immortal Raindrops - Upload Beats</title>
</head>
<body>
    <!-- Upload Link -->
    <a href="#" id="uploadLink">Upload New Beat</a>

    <!-- Upload Form (Hidden by default) -->
    <div id="uploadForm" style="display:none;">
        <h3>Upload Your Beat</h3>
        <form id="beatForm">
            <label for="beatName">Beat Name:</label>
            <input type="text" id="beatName" name="beatName" required><br><br>

            <label for="beatFile">Beat File (MP3):</label>
            <input type="file" id="beatFile" name="beatFile" accept="audio/mp3" required><br><br>

            <label for="beatPrice">Price ($):</label>
            <input type="number" id="beatPrice" name="beatPrice" step="0.01" required><br><br>

            <button type="submit">Upload Beat</button>
        </form>
    </div>

    <!-- Product Grid (Empty for now, will be populated after upload) -->
    <section id="shopNow" class="product-grid">
        <!-- Products will be dynamically added here -->
    </section>

    <script>
        // Show the upload form when the link is clicked
        document.getElementById("uploadLink").addEventListener("click", function(event) {
            event.preventDefault();
            document.getElementById("uploadForm").style.display = "block";
        });

        // Handle the beat upload form submission
        document.getElementById("beatForm").addEventListener("submit", function(event) {
            event.preventDefault();

            // Get form values
            const beatName = document.getElementById("beatName").value;
            const beatFile = document.getElementById("beatFile").files[0];
            const beatPrice = parseFloat(document.getElementById("beatPrice").value).toFixed(2);

            // Generate a unique ID for the beat (for simplicity, using the current timestamp)
            const beatId = new Date().getTime();

            // Create a new product element
            const newProduct = document.createElement("div");
            newProduct.classList.add("product");
            newProduct.setAttribute("data-id", beatId);
            newProduct.setAttribute("data-name", beatName);
            newProduct.setAttribute("data-price", beatPrice);

            // Create an image element (for simplicity, using a placeholder image)
            const productImage = document.createElement("img");
            productImage.src = "placeholder.jpg"; // Replace with the actual image URL
            productImage.alt = beatName;

            // Create an audio player element
            const audioPlayer = document.createElement("div");
            audioPlayer.classList.add("audio-player");
            const audio = document.createElement("audio");
            audio.preload = "metadata";
            audio.src = URL.createObjectURL(beatFile);
            audio.controls = true;

            // Add audio to the player
            audioPlayer.appendChild(audio);

            // Add the product name, audio player, and price
            newProduct.appendChild(productImage);
            newProduct.appendChild(audioPlayer);

            const priceElement = document.createElement("p");
            priceElement.textContent = `$${beatPrice}`;
            newProduct.appendChild(priceElement);

            // Add the "Bag It" button
            const bagItButton = document.createElement("button");
            bagItButton.classList.add("btn");
            bagItButton.textContent = "Bag It";
            newProduct.appendChild(bagItButton);

            // Add the new product to the product grid
            document.getElementById("shopNow").appendChild(newProduct);

            // Clear the form for the next upload
            document.getElementById("beatForm").reset();
            document.getElementById("uploadForm").style.display = "none"; // Hide the form after submission
        });
    </script>
</body>
</html>
